<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kortex Chat - Votre Assistant IA Privé par PLYIA</title>
    <meta name="description" content="Discutez avec vos documents, analysez des images et naviguez sur le web avec Kortex Chat. L'IA de conversation 100% confidentielle, sans abonnement.">
    <link rel="icon" type="image/png" href="../images/PLYIA_Icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VR0VNZ9C4N"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-VR0VNZ9C4N');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLYIA | L'IA qui vous appartient</title>
    <link rel="icon" type="image/png" href="images/PLYIA_Icon.png">
    <meta name="description" content="Découvrez PLYIA, la suite de logiciels IA 100% privés qui tournent sur votre machine. Sans abonnement, sans espionnage.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="../style.css">

    <!-- SEO Meta Tags -->
    <meta name="keywords" content="Kortex Chat, PLYIA, IA, ChatGPT local, IA privée, Llama-3.2, Analyse de documents, Chatbot privé">
    <meta name="author" content="MadeByBatpolygon">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Kortex Chat - Votre Assistant IA Privé par PLYIA">
    <meta property="og:description" content="Discutez avec vos documents, analysez des images et naviguez sur le web avec Kortex Chat, votre IA de conversation 100% privée.">
    <meta property="og:image" content="https://plyia.fr/images/screenshots/kortex_chat_screenshot1.jpg">
    <meta property="og:url" content="https://plyia.fr/products/kortex_chat.html">
    <meta property="og:type" content="website">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Kortex Chat - Votre Assistant IA Privé par PLYIA">
    <meta name="twitter:description" content="Discutez avec vos documents, analysez des images et naviguez sur le web avec Kortex Chat, votre IA de conversation 100% privée.">
    <meta name="twitter:image" content="https://plyia.fr/images/screenshots/kortex_chat_screenshot1.jpg">
</head>
<button id="scrollTopBtn" title="Retour en haut">↑</button>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KVR89QZ5"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="blur-orb" id="orb1"></div>
    <div class="blur-orb" id="orb2"></div>

    <nav class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="nav-logo"><img src="../images/PLYIA_Icon.png" alt="PLYIA Logo"><span>PLYIA</span></a>
            <ul class="nav-links">
                <li><a href="../index.html#produits">Produits</a></li>
                <li><a href="../index.html#vision">Notre Vision</a></li>
                <li><a href="../index.html#roadmap">Roadmap</a></li>
            </ul>
            <div class="nav-actions">
                <a href="plyia_connect.html" class="nav-cta-special">PLYIA Connect</a>
                <a href="../contact.html" class="nav-cta">Contact</a>
            </div>
        </div>
    </nav>

    <main class="product-detail-page">
        <header class="product-hero-container">
            <a href="../index.html#produits" class="back-link">← Retour aux produits</a>
            
            <div class="product-title-group">
                <img src="../images/product_icons/KortexChat_Icon.png" alt="Icône Kortex Chat" class="product-hero-icon">
                <h1>Kortex Chat</h1>
            </div>
            
            <p class="tagline">Votre assistant IA local et privé, capable d'analyser documents, images et de faire des recherches web.</p>
        </header>
            <div class="product-showcase-grid">
                <!-- COLONNE DE GAUCHE : LE CARROUSEL -->
                <div class="product-gallery-container">
                    <div class="product-gallery">
                        <div class="slider-wrapper">
                            <div class="slider-container">
                                <div class="slide"><img src="../images/screenshots/kortex_chat_live_preview.gif" alt="Démonstration de Kortex Chat" onclick="openLightbox(this)"></div>
                                <div class="slide"><img src="../images/screenshots/kortex_chat_screenshot1.jpg" alt="Interface de Kortex Chat" onclick="openLightbox(this)"></div>
                                <div class="slide"><img src="../images/screenshots/kortex_chat_screenshot2.jpg" alt="Analyse de PDF" onclick="openLightbox(this)"></div>
                                <div class="slide"><img src="../images/screenshots/kortex_chat_screenshot3.jpg" alt="Analyse d'image" onclick="openLightbox(this)"></div>
                                <div class="slide"><img src="../images/screenshots/kortex_chat_screenshot4.jpg" alt="Interface détaillée de Kortex Chat" onclick="openLightbox(this)"></div>
                            </div>
                        </div>
                        <button class="slider-arrow prev" onclick="moveSlide(-1)">&#10094;</button>
                        <button class="slider-arrow next" onclick="moveSlide(1)">&#10095;</button>
                        <div class="slider-nav"></div>
                    </div>
                </div>

                <!-- COLONNE DE DROITE : ACHAT & PRÉREQUIS -->
                <div class="product-info-container">
                    <div class="buy-box">
                        <span class="price-detail">27 € - Licence à Vie</span>
                        <a href="#" id="open-modal-btn" class="cta-button">Acheter Kortex Chat</a>
                    </div>
                    
                    <div class="specs-box">
                        <div class="os-spec-group retractable-spec active">
                            <button class="retractable-toggle">
                                <p><strong><img src="../images/linux_icon.png" class="os-icon" alt="Linux Logo"> Pour Linux (Recommandé)</strong></p>
                                <span class="toggle-icon">+</span>
                            </button>
                            <div class="retractable-content">
                                <p><strong>Modèles IA :</strong> <strong>Llama-3.2</strong>, MiniCPM-V-2.6</p>
                                <p><strong>Mode GPU :</strong> 10 Go+ VRAM | 16 Go RAM</p>
                                <p><strong>Mode CPU :</strong> 32 Go RAM | CPU 8 cœurs</p>
                            </div>
                        </div>
                        <div class="os-spec-group retractable-spec">
                            <button class="retractable-toggle">
                                <p><strong><img src="../images/windows_icon.png" class="os-icon" alt="Windows Logo"> Pour Windows</strong></p>
                                <span class="toggle-icon">+</span>
                            </button>
                            <div class="retractable-content">
                                <p><strong>Modèle IA :</strong> <strong>Llama-2-7B</strong> (limitation technique)</p>
                                <p><strong>Configuration :</strong> <strong style="color: #ff8a8a;">Compatibilité GPU variable (instable)</strong></p>
                                <p><strong>Prérequis :</strong> 16 Go+ RAM | CPU 8 cœurs</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="disclaimer-box" style="text-align: left; max-width: 900px; margin: 2rem auto;">
                <h3>⚠️ Note Importante : Différences entre Windows et Linux</h3>
                <p>
                    L'écosystème de l'IA locale évolue rapidement. Sur Linux, l'intégration des derniers modèles et du matériel est fluide et stable. Cependant, l'environnement Windows présente actuellement des défis techniques majeurs qui rendent instables l'utilisation des architectures les plus récentes (comme Llama 3.2) et l'accélération GPU pour un usage grand public.
                </p>
                <p style="margin-top: 1rem;">
                    Par souci de stabilité, la version Windows de Kortex Chat est donc actuellement limitée au modèle <strong>Llama-2-7B</strong> et la compatibilité GPU peut être <strong>instable</strong>.
                </p>
                <p style="margin-top: 1rem; font-weight: 600; background-color: rgba(58, 125, 255, 0.1); padding: 1rem; border-radius: 8px;">
                    Pour profiter à 100% du potentiel de Kortex Chat, avec les modèles les plus récents et l'accélération GPU, <strong>nous recommandons vivement d'utiliser la version Linux.</strong><br><br>
                    Notre équipe travaille activement à une solution pour Windows. Si vous possédez une licence, vous serez bien sûr informé et bénéficierez de la mise à jour dès qu'elle sera disponible.
                </p>
            </div>
        <section class="full-width-section simple-steps-section" style="padding-top: 4rem; padding-bottom: 4rem;">
            <h2>Votre IA Prête en 3 Étapes</h2>
            <div class="philosophy-grid" style="max-width: 1200px; margin-top: 2rem;">
                <div class="philosophy-card">
                    <h3 style="text-align: center;">1. Installez le Logiciel</h3>
                    <p style="text-align: center;">Un seul installateur s'occupe de la partie technique. Il met en place le logiciel et son environnement Python optimisé sur votre machine. Pas de prérequis compliqués.</p>
                </div>
                <div class="philosophy-card">
                    <h3 style="text-align: center;">2. Activez l'IA</h3>
                    <p style="text-align: center;">Au premier lancement, le logiciel vous guide. <strong>Téléchargez notre modèle recommandé en un clic</strong> pour un équilibre parfait performance/ressources, ou <strong>importez directement votre propre modèle</strong>. C'est vous qui choisissez.</p>
                </div>
                <div class="philosophy-card">
                    <h3 style="text-align: center;">3. Créez Sans Limites</h3>
                    <p style="text-align: center;">Une fois le modèle chargé, l'IA est prête. Profitez de toute sa puissance à travers une interface simple et intuitive. Zéro ligne de commande, 100% création.</p>
                </div>
            </div>
        </section>

        <div class="product-details-content">
            <section class="product-description">
                <h2>En détail</h2>
                <p>Kortex Chat est le couteau suisse de votre productivité. C'est l'outil qui vous permet de poser des questions complexes, d'analyser vos propres fichiers sensibles et de comprendre le contenu d'images, le tout sans jamais envoyer la moindre information sur internet.</p>
                <h3>Fonctionnalités Clés :</h3>
                <ul>
                    <li>✓ <strong>Mode Agent :</strong> Pour les tâches complexes, il peut naviguer sur le web pour des recherches approfondies.</li>
                    <li>✓ <strong>Analyse de Documents (PDF/DOCX) :</strong> Obtenez rapidement l'essentiel d'un document.</li>
                    <li>✓ <strong>Analyse d'Images :</strong> Lit le texte dans vos images et répond à des questions précises sur le contenu visuel.</li>
                    <li>✓ <strong>Chat & Recherche Web :</strong> Votre partenaire de conversation pour les questions rapides et les brainstormings.</li>
                </ul>
            </section>

            <div class="usage-tips-box">
                <h3>💡 Optimisez Votre Expérience : Comprendre les Modes</h3>
                <p>Chaque mode de Kortex Chat est conçu pour une tâche spécifique, avec un impact différent sur la vitesse de réponse. Comprendre leur fonctionnement vous aidera à choisir le bon outil pour le bon travail :</p>
                <ul style="text-align: left; list-style-position: inside; margin-top: 1rem;">
                    <li><strong>Mode Chat (Normal) :</strong> Idéal pour les questions rapides, le brainstorming et la rédaction. C'est <strong>le mode le plus rapide et le plus réactif</strong>.</li>
                    <li><strong>Mode CoT (Chain of Thought) :</strong> Pour les raisonnements complexes. Il est <strong>un peu plus lent</strong> car l'IA détaille ses étapes de pensée pour améliorer la précision de la réponse finale.</li>
                    <li><strong>Mode Agent (AgT) :</strong> Pour les recherches approfondies. C'est <strong>le mode le plus lent</strong>, sa vitesse dépendant directement du nombre d'itérations (recherches, lectures) nécessaires pour accomplir sa mission.</li>
                </ul>
                <p style="margin-top: 1rem; border-top: 1px solid var(--card-border-color); padding-top: 1rem;">
                    <strong>Note générale :</strong> Dans tous les modes, la longueur du contexte (l'historique de votre conversation) influe sur les performances. Des conversations plus longues demanderont naturellement plus de ressources à votre machine.
                </p>
            </div>

            <section class="full-width-section">
                <h2>Capacités d'Analyse</h2>
                <div class="performance-graph-container">
                    <svg width="100%" viewBox="0 0 500 250" class="performance-graph"><rect width="500" height="250" fill="var(--card-bg-color)" rx="12"></rect><g class="grid" stroke="rgba(255, 255, 255, 0.1)" stroke-width="1"><line x1="50" y1="50" x2="50" y2="200"></line><line x1="50" y1="200" x2="450" y2="200"></line></g><g class="labels" fill="var(--text-muted-color)" font-size="12" font-family="var(--font-family)"><text x="40" y="50" dy="4" text-anchor="end">Élevée</text><text x="40" y="125" dy="4" text-anchor="end">Bonne</text><text x="40" y="200" dy="4" text-anchor="end">Standard</text><text x="15" y="125" transform="rotate(-90, 15, 125)" text-anchor="middle">Capacité</text><text x="100" y="220" text-anchor="middle">Image</text><text x="250" y="220" text-anchor="middle">Document</text><text x="400" y="220" text-anchor="middle">Agent</text><text x="250" y="240" text-anchor="middle" font-weight="700">Type de Tâche</text></g><path d="M 50 180 C 150 160, 200 100, 250 80 S 350 55, 450 50" fill="none" stroke="var(--accent-blue)" stroke-width="3" stroke-linecap="round" class="performance-curve"></path><g class="data-points"><circle class="data-point" r="6" data-position="0.2" data-words="Analyse d'Image" data-effectiveness="Bonne" data-info="Décrit la scène, lit le texte."></circle><circle class="data-point" r="6" data-position="0.5" data-words="Analyse de Doc" data-effectiveness="Très Bonne" data-info="Excellent pour la synthèse."></circle><circle class="data-point" r="6" data-position="0.9" data-words="Agent Créatif" data-effectiveness="Élevée" data-info="Idéal pour la rédaction."></circle></g><g id="tooltip" visibility="hidden"><rect id="tooltip-bg" height="75" rx="8" fill="rgba(0,0,0,0.8)" stroke="var(--accent-blue)"></rect><text id="tooltip-line1" x="10" y="25" font-size="14" font-weight="700" fill="var(--text-color)"></text><text id="tooltip-line2" x="10" y="45" font-size="12" fill="var(--text-color)"></text><text id="tooltip-line3" x="10" y="60" font-size="12" fill="var(--text-muted-color)"></text></g></svg>
                    <div id="tooltip-fallback"></div>
                </div>
            </section>

            <div class="disclaimer-box">
                <h3>⚠️ Transparence : Modèles, Performances et Installation</h3>
                <p>
                    <strong>Notre Rôle et les Modèles Open Source :</strong> PLYIA ne crée pas les modèles d'IA. Nous utilisons des projets open source exceptionnels, comme les modèles <strong>Llama-3.2</strong> (par Meta AI) et <strong>MiniCPM-V</strong> (par OpenBMB) pour ce logiciel. <strong>Ce que vous achetez avec Kortex Chat, c'est une interface stable et un installateur intelligent qui rendent l'utilisation de ces technologies puissantes simple et accessible.</strong> <a href="https://huggingface.co/meta-llama/Meta-Llama-3.1-8B-Instruct" target="_blank" rel="noopener noreferrer">En savoir plus sur le modèle Llama-3.2</a>.
                </p>
                <p style="margin-top: 1rem;">
                    <strong>Performances et Installation :</strong> Puisque tout tourne sur votre machine pour garantir votre confidentialité, les performances dépendent <strong>uniquement</strong> de votre configuration matérielle. De plus, il est <strong>parfaitement normal</strong> de voir des fenêtres de terminal (écrans noirs) s'afficher brièvement lors de l'installation ; c'est notre installateur qui configure l'environnement Python pour vous, de manière 100% automatique.
                </p>
            </div>

            <section id="compatibility-test" class="compatibility-section">
                <h2>Test de Compatibilité Rapide</h2>
                <p>Ce test analyse les informations de votre navigateur pour une estimation. <strong>Les prérequis étant différents, merci de vous référer à la configuration Windows ou Linux détaillée ci-dessus.</strong></p>
                <div id="test-box">
                    <button id="run-test-btn" class="cta-button">Lancer le Test (CPU & RAM)</button>
                    <div id="test-results" class="results-container"></div>
                </div>
            </section>
        </div>
    </main>

    <div id="lightbox" class="lightbox" onclick="closeLightbox()"><span class="lightbox-close">&times;</span><img class="lightbox-content" id="lightbox-img"></div>
    <div id="compatibility-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="closeCompatibilityModal()">&times;</button>
            <h3>Vérification des Prérequis</h3>
            <p>Kortex Chat fonctionne mieux avec un GPU, mais peut aussi utiliser votre CPU si vous avez assez de RAM. Veuillez vérifier votre configuration.</p>
            <div class="modal-actions">
                <button id="modal-scroll-to-test" class="modal-button secondary">Faire le test</button>
                <a id="modal-confirm-purchase" href="https://plyia.gumroad.com/l/kortex_chat" class="modal-button primary">Acheter quand même</a>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="footer-socials">
            <a href="https://www.youtube.com/@PlyiaOfficiel" target="_blank" rel="noopener noreferrer" title="YouTube">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg>
            </a>
            <a href="https://www.reddit.com/user/plyia/" target="_blank" rel="noopener noreferrer" title="Reddit">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M24 11.779c0-1.459-1.192-2.645-2.657-2.645-.715 0-1.363.286-1.84.746-1.81-1.191-4.259-1.982-6.951-2.046l1.443-4.631 4.105.973c.002 1.054.855 1.905 1.909 1.905 1.055 0 1.909-.851 1.909-1.905s-.854-1.905-1.909-1.905c-.754 0-1.412.433-1.735 1.069l-4.54-1.076c-.19-.045-.383.014-.521.16-.138.146-.188.357-.132.548l-1.503 4.831c-2.81.005-5.388.766-7.29 1.921-.458-.423-1.07-.678-1.748-.678-1.465 0-2.657 1.187-2.657 2.646 0 .97.538 1.818 1.339 2.291-.01.087-.015.176-.015.266 0 2.893 3.421 5.244 7.632 5.244s7.632-2.351 7.632-5.244c0-.09-.005-.179-.015-.266.801-.473 1.339-1.321 1.339-2.291zm-15.343 2.115c-.742 0-1.343-.6-1.343-1.343s.601-1.343 1.343-1.343c.742 0 1.343.6 1.343 1.343s-.601 1.343-1.343 1.343zm6.686 0c-.742 0-1.343-.6-1.343-1.343s.601-1.343 1.343-1.343c.742 0 1.343.6 1.343 1.343s-.601 1.343-1.343 1.343z"/></svg>
            </a>
        </div>
        <div class="footer-links">
            <a href="../legal/privacy.html">Politique de Confidentialité</a>
            <a href="../legal/terms.html">Conditions Générales de Vente</a>
            <a href="../legal/refund.html">Politique de Remboursement</a>
            <a href="../faq.html">FAQ</a>
            <a href="../contact.html">Contact</a>
            <a href="../legal/mentions-legales.html">Mentions Légales</a>
        </div>
        <p>© 2025 PLYIA - Tous droits réservés.</p>
    </footer>

    <script src="https://gumroad.com/js/gumroad.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- SECTION 1: CARROUSEL ---
            let currentSlide = 0;
            let slideInterval;
            const slides = document.querySelectorAll('.slide');
            const sliderContainer = document.querySelector('.slider-container');
            const sliderNav = document.querySelector('.slider-nav');
            if (slides.length > 0) {
                slides.forEach((_, index) => {
                    const dot = document.createElement('div');
                    dot.classList.add('slider-nav-dot');
                    dot.addEventListener('click', () => goToSlide(index));
                    sliderNav.appendChild(dot);
                });
                const dots = document.querySelectorAll('.slider-nav-dot');
                window.goToSlide = (index) => { currentSlide = index; sliderContainer.style.transform = `translateX(-${currentSlide * 100}%)`; updateNav(); resetInterval(); };
                const updateNav = () => { dots.forEach(dot => dot.classList.remove('active')); dots[currentSlide].classList.add('active'); };
                window.moveSlide = (n) => { let newIndex = currentSlide + n; if (newIndex >= slides.length) newIndex = 0; if (newIndex < 0) newIndex = slides.length - 1; goToSlide(newIndex); };
                const startInterval = () => { slideInterval = setInterval(() => moveSlide(1), 7000); };
                const resetInterval = () => { clearInterval(slideInterval); startInterval(); };
                goToSlide(0);
            }

            // --- SECTION 2: LIGHTBOX ---
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            window.openLightbox = (img) => { if(slideInterval) clearInterval(slideInterval); lightbox.style.display = 'flex'; lightboxImg.src = img.src; };
            window.closeLightbox = () => { lightbox.style.display = 'none'; if(slideInterval) startInterval(); };

            // --- SECTION 3: GRAPHIQUE INTERACTIF ---
            const svgGraph = document.querySelector('.performance-graph');
            if (svgGraph) {
                const curvePath = svgGraph.querySelector('.performance-curve');
                const dataPoints = svgGraph.querySelectorAll('.data-point');
                const tooltip = svgGraph.querySelector('#tooltip');
                const tooltipBg = svgGraph.querySelector('#tooltip-bg');
                const tooltipLine1 = svgGraph.querySelector('#tooltip-line1');
                const tooltipLine2 = svgGraph.querySelector('#tooltip-line2');
                const tooltipLine3 = svgGraph.querySelector('#tooltip-line3');
                const pathLength = curvePath.getTotalLength();
                const alignPoints = () => { dataPoints.forEach(point => { const pos = parseFloat(point.getAttribute('data-position')); const p = curvePath.getPointAtLength(pathLength * pos); point.setAttribute('cx', p.x); point.setAttribute('cy', p.y); }); };
                dataPoints.forEach(point => {
                    point.addEventListener('mouseenter', e => {
                        tooltipLine1.textContent = `Tâche : ${e.target.getAttribute('data-words')}`;
                        tooltipLine2.textContent = `Capacité : ${e.target.getAttribute('data-effectiveness')}`;
                        tooltipLine3.textContent = `Exemple : ${e.target.getAttribute('data-info')}`;
                        const padding = 20; const maxWidth = Math.max(tooltipLine1.getBBox().width, tooltipLine2.getBBox().width, tooltipLine3.getBBox().width); tooltipBg.setAttribute('width', maxWidth + padding);
                        tooltip.setAttribute('visibility', 'visible');
                    });
                    point.addEventListener('mousemove', e => { const CTM = svgGraph.getScreenCTM(); let x = (e.clientX - CTM.e) / CTM.a + 15; let y = (e.clientY - CTM.f) / CTM.d - 15; if (x + tooltipBg.getBBox().width > svgGraph.viewBox.baseVal.width) { x = (e.clientX - CTM.e) / CTM.a - tooltipBg.getBBox().width - 15; } tooltip.setAttribute('transform', `translate(${x}, ${y})`); });
                    point.addEventListener('mouseleave', () => tooltip.setAttribute('visibility', 'hidden'));
                });
                alignPoints();
            }

            // --- SECTION 4: MODAL & TEST DE COMPATIBILITÉ ---
            const mainBuyButton = document.getElementById('open-modal-btn');
            const modal = document.getElementById('compatibility-modal');
            const scrollToTestBtn = document.getElementById('modal-scroll-to-test');
            const testSection = document.getElementById('compatibility-test');
            const runTestBtn = document.getElementById('run-test-btn');
            const testResultsDiv = document.getElementById('test-results');

            if (mainBuyButton) { mainBuyButton.addEventListener('click', e => { e.preventDefault(); modal.style.display = 'flex'; }); }
            window.closeCompatibilityModal = () => { modal.style.display = 'none'; };
            scrollToTestBtn.addEventListener('click', () => { closeCompatibilityModal(); testSection.scrollIntoView({ behavior: 'smooth' }); });
            modal.addEventListener('click', e => { if (e.target === modal) closeCompatibilityModal(); });

            const runCompatibilityCheck = (cores, ram) => {
                const requiredRamCpu = 32, requiredRamGpu = 16, requiredCores = 8;
                let conclusionClass = '', conclusionText = '';
                if (ram >= requiredRamCpu && cores >= requiredCores) {
                    conclusionText = 'OPTIMAL (Mode CPU) : Votre configuration est excellente pour le mode CPU.';
                    conclusionClass = 'result-optimal';
                } else if (ram >= requiredRamGpu) {
                    conclusionText = 'SUFFISANT (Mode GPU) : Votre RAM est suffisante pour le mode GPU (vérifiez votre VRAM).';
                    conclusionClass = 'result-sufficient';
                } else {
                    conclusionText = 'INSUFFISANT : Votre RAM est trop faible pour une expérience fluide.';
                    conclusionClass = 'result-insufficient';
                }

                let finalHTML = `<div class="result-line"><strong>Cœurs CPU :</strong> ${cores}</div><div class="result-line"><strong>Mémoire RAM :</strong> ${ram} Go</div><div class="result-conclusion ${conclusionClass}">${conclusionText}</div>`;
                
                // NOTE: Pensez à remplacer le lien placeholder ci-dessous
                if (conclusionClass === 'result-sufficient' || conclusionClass === 'result-optimal') {
                    finalHTML += `<a id="modal-confirm-purchase" href="https://plyia.gumroad.com/l/kortex_chat" class="modal-button primary" style="margin-top: 1.5rem; display: block;">Acheter Kortex Chat</a>`;
                }

                testResultsDiv.innerHTML = finalHTML;

                if (window.LemonSqueezy) {
                    LemonSqueezy.Refresh();
                }
            };

            const showManualTest = () => {
                testResultsDiv.innerHTML = `
                    <p>Le test automatique n'a pas pu déterminer vos spécifications. Veuillez les entrer manuellement :</p>
                    <div class="manual-input-group">
                        <label for="cpu-cores">Nombre de cœurs CPU :</label>
                        <input type="number" id="cpu-cores" value="${navigator.hardwareConcurrency || 8}" min="1">
                    </div>
                    <div class="manual-input-group">
                        <label for="ram-gb">Mémoire RAM (en Go) :</label>
                        <input type="number" id="ram-gb" placeholder="Ex: 32" min="1">
                    </div>
                    <button id="verify-manual-btn" class="cta-button" style="margin-top: 1rem;">Vérifier</button>`;
                document.getElementById('verify-manual-btn').addEventListener('click', () => {
                    const manualCores = document.getElementById('cpu-cores').value || 0;
                    const manualRam = document.getElementById('ram-gb').value || 0;
                    if (manualRam > 0) runCompatibilityCheck(parseInt(manualCores), parseInt(manualRam));
                });
            };

            runTestBtn.addEventListener('click', () => {
                const userCores = navigator.hardwareConcurrency || 0;
                const userRam = navigator.deviceMemory || 0;
                if (userRam > 0 && userCores > 0) {
                    runCompatibilityCheck(userCores, userRam);
                    testResultsDiv.innerHTML += `<a id="manual-test-link">Informations incorrectes ? Faire un test manuel.</a>`;
                    document.getElementById('manual-test-link').addEventListener('click', (e) => { e.preventDefault(); showManualTest(); });
                } else {
                    showManualTest();
                }
            });

            const scrollTopBtn = document.getElementById('scrollTopBtn');

            window.onscroll = () => {
                if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                    scrollTopBtn.classList.add('visible');
                } else {
                    scrollTopBtn.classList.remove('visible');
                }
            };

            scrollTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            const specToggles = document.querySelectorAll('.retractable-toggle');

            specToggles.forEach(toggle => {
                toggle.addEventListener('click', () => {
                    const parentSpecGroup = toggle.closest('.retractable-spec');
                    if (parentSpecGroup) {
                        parentSpecGroup.classList.toggle('active');
                    }
                });
            });
        });
    </script>
</body>
</html>